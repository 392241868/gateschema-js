{"version":3,"file":"gateschema.min.js","sources":["../esm/alias/index.js","../esm/util.js","../esm/keywords/number.js","../esm/keywords/oneOf.js","../esm/keywords/switch.js","../esm/keywords/format_validator.js","../esm/keywords/index.js","../esm/keywords/required.js","../esm/keywords/optional.js","../esm/keywords/boolean.js","../esm/keywords/string.js","../esm/keywords/binary.js","../esm/keywords/map.js","../esm/keywords/list.js","../esm/keywords/any.js","../esm/keywords/enum.js","../esm/keywords/enumList.js","../esm/keywords/value.js","../esm/keywords/format.js","../esm/keywords/pattern.js","../esm/keywords/length.js","../esm/keywords/unique.js","../esm/keywords/not.js","../esm/keywords/notEmpty.js","../esm/keywords/equal.js","../esm/keywords/allowAdditional.js","../esm/keywords/other.js","../esm/schemaBase.js","../esm/protoProps/index.js","../esm/protoProps/clone.js","../esm/protoProps/keys.js","../esm/protoProps/msg.js","../esm/protoProps/get.js","../esm/ValidationError.js","../esm/index.js","../esm/msgs.js"],"sourcesContent":["var cond = {\n    name: 'cond',\n    add: function () {\n        var _this = this;\n        return function (path, whenNotNull, whenNull) {\n            var _ = _this.constructor;\n            return _this.switch(path, [\n                {\n                    case: _.required,\n                    schema: whenNotNull\n                },\n                {\n                    case: _.any,\n                    schema: whenNull || _.any\n                }\n            ]);\n        };\n    }\n};\nvar r = {\n    name: 'r',\n    add: function () {\n        return this.required;\n    }\n};\nvar o = {\n    name: 'o',\n    add: function () {\n        return this.optional;\n    }\n};\nvar bool = {\n    name: 'bool',\n    add: function () {\n        return this.boolean;\n    }\n};\nvar num = {\n    name: 'num',\n    add: function () {\n        return this.number;\n    }\n};\nvar str = {\n    name: 'str',\n    add: function () {\n        return this.string;\n    }\n};\nvar bin = {\n    name: 'bin',\n    add: function () {\n        return this.binary;\n    }\n};\nexport default [r, o, bool, num, str, bin, cond];\n//# sourceMappingURL=index.js.map","export function isObject(x) {\n    return x != null && typeof x === 'object';\n}\nexport function getConstraints(schema) {\n    if (Array.isArray(schema)) {\n        return schema;\n    }\n    return schema.constraints;\n}\nexport var charCount = (function (ArrayFrom) {\n    return ArrayFrom\n        ? function (str) {\n            return str.replace(/[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g, '_').length;\n        }\n        : function (str) { return ArrayFrom(str).length; };\n})(Array.from);\nexport function isBase64(str) {\n    return (typeof str === 'string' &&\n        /^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/.test(str));\n}\n//# sourceMappingURL=util.js.map","var NUMERIC = /^-?(\\d+(\\.\\d*)?|\\.\\d+)(e[+-]?\\d+)?$/i;\nexport default {\n    name: 'number',\n    validator: function (value, _a, cb) {\n        var path = _a.path, state = _a.state;\n        state.types[path] = 'number';\n        if (typeof value === 'number' || NUMERIC.test(value)) {\n            return cb();\n        }\n        cb(true);\n    }\n};\n//# sourceMappingURL=number.js.map","function getMatchSchema(_a, cb) {\n    var _this = this;\n    var path = _a.path, args = _a.args, rootData = _a.rootData, _b = _a.state, state = _b === void 0 ? {} : _b, options = _a.options;\n    var schemas = args[0];\n    var length = schemas.length;\n    var value = this.getValue(path, rootData, path, state.values);\n    var schemaItem;\n    var next = function (i) {\n        if (i < length) {\n            schemaItem = schemas[i];\n            _this.validate(value, {\n                schema: schemaItem,\n                path: path,\n                rootData: rootData,\n                state: state,\n                options: options\n            }, function (err) {\n                if (!err) {\n                    cb(schemaItem);\n                }\n                else {\n                    next(++i);\n                }\n            });\n        }\n        else {\n            cb();\n        }\n    };\n    next(0);\n}\nexport default {\n    getMatchSchema: getMatchSchema,\n    isHighOrder: true,\n    name: 'oneOf',\n    validator: function (value, _a, cb) {\n        var path = _a.path, rootData = _a.rootData, state = _a.state, args = _a.args, options = _a.options;\n        getMatchSchema.call(this, {\n            path: path,\n            args: args,\n            rootData: rootData,\n            state: state,\n            options: options\n        }, function (schema) {\n            if (schema) {\n                cb();\n            }\n            else {\n                cb(true);\n            }\n        });\n    }\n};\n//# sourceMappingURL=oneOf.js.map","import { getConstraints } from '../util';\nfunction getMatchSchema(_a, cb) {\n    var _this = this;\n    var path = _a.path, args = _a.args, rootData = _a.rootData, _b = _a.state, state = _b === void 0 ? {} : _b, options = _a.options;\n    var targetPath = args[0], branches = args[1];\n    var length = branches.length;\n    var targetValue = this.getValue(targetPath, rootData, path, state.values);\n    var next = function (i) {\n        if (i < length) {\n            var branch = branches[i];\n            var caseItem = branch.case;\n            var schema_1 = branch.schema;\n            _this.validate(targetValue, {\n                schema: caseItem,\n                path: targetPath,\n                rootData: rootData,\n                state: state,\n                options: options\n            }, function (err) {\n                if (!err) {\n                    cb(schema_1);\n                }\n                else {\n                    next(++i);\n                }\n            });\n        }\n        else {\n            cb();\n        }\n    };\n    next(0);\n}\nexport default {\n    getMatchSchema: getMatchSchema,\n    isHighOrder: true,\n    name: 'switch',\n    validator: function (value, _a, cb) {\n        var _this = this;\n        var path = _a.path, rootData = _a.rootData, state = _a.state, args = _a.args, options = _a.options;\n        getMatchSchema.call(this, {\n            args: args,\n            path: path,\n            rootData: rootData,\n            state: state,\n            options: options\n        }, function (schema) {\n            if (schema) {\n                _this.validate(value, {\n                    schema: getConstraints(schema),\n                    path: path,\n                    rootData: rootData,\n                    state: state,\n                    options: options\n                }, cb);\n            }\n            else {\n                cb();\n            }\n        });\n    }\n};\n//# sourceMappingURL=switch.js.map","var DATE = /^(\\d\\d\\d\\d)-(\\d\\d)-(\\d\\d)$/;\nvar DAYS = [0, 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\nvar TIME = /^(\\d\\d):(\\d\\d):(\\d\\d)(\\.\\d+)?(z|[+-]\\d\\d:\\d\\d)?$/i;\nvar DATE_TIME_SEPARATOR = /t|\\s/i;\nvar HOSTNAME = /^[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*$/i;\nvar NOT_URI_FRAGMENT = /\\/|:/;\nvar URI = /^(?:[a-z][a-z0-9+\\-.]*:)(?:\\/?\\/(?:(?:[a-z0-9\\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\\.[a-z0-9\\-._~!$&'()*+,;=:]+)\\]|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)|(?:[a-z0-9\\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\\d*)?(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\\/(?:(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\\?(?:[a-z0-9\\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;\nvar URL = /^(?:(?:http[s\\u017F]?|ftp):\\/\\/)(?:(?:[\\0-\\x08\\x0E-\\x1F!-\\x9F\\xA1-\\u167F\\u1681-\\u1FFF\\u200B-\\u2027\\u202A-\\u202E\\u2030-\\u205E\\u2060-\\u2FFF\\u3001-\\uD7FF\\uE000-\\uFEFE\\uFF00-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])+(?::(?:[\\0-\\x08\\x0E-\\x1F!-\\x9F\\xA1-\\u167F\\u1681-\\u1FFF\\u200B-\\u2027\\u202A-\\u202E\\u2030-\\u205E\\u2060-\\u2FFF\\u3001-\\uD7FF\\uE000-\\uFEFE\\uFF00-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])*)?@)?(?:(?!10(?:\\.[0-9]{1,3}){3})(?!127(?:\\.[0-9]{1,3}){3})(?!169\\.254(?:\\.[0-9]{1,3}){2})(?!192\\.168(?:\\.[0-9]{1,3}){2})(?!172\\.(?:1[6-9]|2[0-9]|3[01])(?:\\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9KSa-z\\xA1-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])+-?)*(?:[0-9KSa-z\\xA1-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])+)(?:\\.(?:(?:[0-9KSa-z\\xA1-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])+-?)*(?:[0-9KSa-z\\xA1-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])+)*(?:\\.(?:(?:[KSa-z\\xA1-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\\/(?:[\\0-\\x08\\x0E-\\x1F!-\\x9F\\xA1-\\u167F\\u1681-\\u1FFF\\u200B-\\u2027\\u202A-\\u202E\\u2030-\\u205E\\u2060-\\u2FFF\\u3001-\\uD7FF\\uE000-\\uFEFE\\uFF00-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])*)?$/i;\nvar EMAIL = /^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i;\nvar IPV4 = /^(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)$/;\nvar IPV6 = /^\\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:)))(?:%.+)?\\s*$/i;\nfunction _isLeapYear(year) {\n    return year % 4 === 0 && (year % 100 !== 0 || year % 400 === 0);\n}\nfunction date(str) {\n    var matches = str.match(DATE);\n    if (!matches) {\n        return false;\n    }\n    var year = +matches[1];\n    var month = +matches[2];\n    var day = +matches[3];\n    return (month >= 1 &&\n        month <= 12 &&\n        day >= 1 &&\n        day <= (month === 2 && _isLeapYear(year) ? 29 : DAYS[month]));\n}\nfunction time(str, full) {\n    var matches = str.match(TIME);\n    if (!matches) {\n        return false;\n    }\n    var hour = +matches[1];\n    var minute = +matches[2];\n    var second = +matches[3];\n    var timeZone = matches[5];\n    return (((hour <= 23 && minute <= 59 && second <= 59) ||\n        (hour === 23 && minute === 59 && second === 60)) &&\n        (!full || timeZone));\n}\nfunction date_time(str) {\n    var dateTime = str.split(DATE_TIME_SEPARATOR);\n    return dateTime.length === 2 && date(dateTime[0]) && time(dateTime[1], true);\n}\nfunction hostname(str) {\n    return str.length <= 255 && HOSTNAME.test(str);\n}\nfunction uri(str) {\n    return NOT_URI_FRAGMENT.test(str) && URI.test(str);\n}\nfunction url(str) {\n    return URL.test(str);\n}\nfunction email(str) {\n    return EMAIL.test(str);\n}\nfunction ipv4(str) {\n    return IPV4.test(str);\n}\nfunction ipv6(str) {\n    return IPV6.test(str);\n}\nvar validators = {\n    date: date,\n    'date-time': date_time,\n    email: email,\n    hostname: hostname,\n    ipv4: ipv4,\n    ipv6: ipv6,\n    uri: uri,\n    url: url\n};\nexport default validators;\n//# sourceMappingURL=format_validator.js.map","import optional from './optional';\nimport required from './required';\nimport binary from './binary';\nimport boolean from './boolean';\nimport number from './number';\nimport string from './string';\nimport any from './any';\nimport enum_ from './enum';\nimport enumList from './enumList';\nimport list from './list';\nimport map_ from './map';\nimport oneOf from './oneOf';\nimport value from './value';\nimport keywordSwitch from './switch';\nimport equal from './equal';\nimport format from './format';\nimport length from './length';\nimport not from './not';\nimport notEmpty from './notEmpty';\nimport pattern from './pattern';\nimport unique from './unique';\nimport allowAdditional from './allowAdditional';\nimport other from './other';\nexport default [\n    required,\n    optional,\n    boolean,\n    number,\n    string,\n    binary,\n    map_,\n    list,\n    oneOf,\n    any,\n    enum_,\n    enumList,\n    value,\n    format,\n    pattern,\n    length,\n    unique,\n    not,\n    notEmpty,\n    equal,\n    keywordSwitch,\n    allowAdditional,\n    other\n];\n//# sourceMappingURL=index.js.map","export default {\n    name: 'required',\n    add: function () {\n        var first = this.constraints[0];\n        if (first && (first === 'optional' || first.name === 'optional')) {\n            this.constraints.splice(0, 1, 'required');\n        }\n        else {\n            this.constraints.unshift('required');\n        }\n        this.lastConstraintIndex = 0;\n        return this;\n    },\n    validator: function (value, ctx, cb) {\n        value == null ? cb(true) : cb();\n    }\n};\n//# sourceMappingURL=required.js.map","export default {\n    name: 'optional',\n    add: function () {\n        var first = this.constraints[0];\n        if (first && (first === 'required' || first.name === 'required')) {\n            this.constraints.splice(0, 1, 'optional');\n        }\n        else {\n            this.constraints.unshift('optional');\n        }\n        this.lastConstraintIndex = 0;\n        return this;\n    },\n    validator: function (value, ctx, cb) {\n        value == null ? cb(this.BREAK) : cb();\n    }\n};\n//# sourceMappingURL=optional.js.map","export default {\n    name: 'boolean',\n    validator: function (value, _a, cb) {\n        var path = _a.path, state = _a.state;\n        state.types[path] = 'boolean';\n        cb(typeof value !== 'boolean');\n    }\n};\n//# sourceMappingURL=boolean.js.map","export default {\n    name: 'string',\n    validator: function (value, _a, cb) {\n        var path = _a.path, state = _a.state;\n        state.types[path] = 'string';\n        cb(typeof value !== 'string');\n    }\n};\n//# sourceMappingURL=string.js.map","import { isBase64 } from '../util';\nexport default {\n    name: 'binary',\n    validator: function (value, _a, cb) {\n        var path = _a.path, state = _a.state;\n        state.types[path] = 'binary';\n        if (isBase64(value)) {\n            return cb();\n        }\n        if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n            return cb();\n        }\n        cb(true);\n    }\n};\n//# sourceMappingURL=binary.js.map","import { isObject } from '../util';\nexport default {\n    isHighOrder: true,\n    name: 'map',\n    validator: function (value, _a, cb) {\n        var _this = this;\n        var path = _a.path, rootData = _a.rootData, state = _a.state, args = _a.args, options = _a.options;\n        state.types[path] = 'map';\n        var obj = args[0];\n        var keys = Object.keys(obj);\n        var length = keys.length;\n        var stateValues = state.values;\n        var stateMapDefinitions = state.mapDefinitions;\n        if (stateMapDefinitions[path]) {\n            stateMapDefinitions[path].push(obj);\n        }\n        else {\n            stateValues[path] = value;\n            stateMapDefinitions[path] = [obj];\n        }\n        if (!isObject(value)) {\n            return cb(true);\n        }\n        var i = 0;\n        var key;\n        var schema;\n        var next = function (err) {\n            if (err) {\n                return cb(err);\n            }\n            if (i < length) {\n                key = keys[i++];\n                schema = obj[key];\n                return _this.validate(value[key], {\n                    schema: schema,\n                    path: path === '/' ? \"/\" + key : path + \"/\" + key,\n                    rootData: rootData,\n                    state: state,\n                    options: options\n                }, next);\n            }\n            return cb(err);\n        };\n        next();\n    },\n    getChildSchema: function (_a, cb) {\n        var childKey = _a.childKey, args = _a.args;\n        var obj = args[0];\n        cb(obj[childKey]);\n    }\n};\n//# sourceMappingURL=map.js.map","export default {\n    isHighOrder: true,\n    name: 'list',\n    validator: function (value, _a, cb) {\n        var _this = this;\n        var path = _a.path, rootData = _a.rootData, state = _a.state, args = _a.args, options = _a.options;\n        if (!Array.isArray(value)) {\n            return cb(true);\n        }\n        state.types[path] = 'list';\n        var i = 0;\n        var length = value.length;\n        var schema = args[0];\n        var next = function (err) {\n            if (err) {\n                return cb(err);\n            }\n            if (i < length) {\n                var key = i++;\n                return _this.validate(value[key], {\n                    schema: schema,\n                    path: path === '/' ? \"/\" + key : path + \"/\" + key,\n                    rootData: rootData,\n                    state: state,\n                    options: options\n                }, next);\n            }\n            return cb(err);\n        };\n        next();\n    }\n};\n//# sourceMappingURL=list.js.map","export default {\n    name: 'any',\n    validator: function (value, ctx, cb) {\n        cb();\n    }\n};\n//# sourceMappingURL=any.js.map","export default {\n    isHighOrder: true,\n    name: 'enum',\n    validator: function (receivedValue, _a, cb) {\n        var args = _a.args;\n        var _b = args[0], expectedValues = _b === void 0 ? {} : _b;\n        for (var key in expectedValues) {\n            if (expectedValues[key] === receivedValue) {\n                return cb();\n            }\n        }\n        var keys = Object.keys(expectedValues);\n        var values = keys.map(function (key) { return expectedValues[key]; });\n        cb({\n            keys: JSON.stringify(keys),\n            values: JSON.stringify(values)\n        });\n    }\n};\n//# sourceMappingURL=enum.js.map","export default {\n    isHighOrder: true,\n    name: 'enumList',\n    validator: function (receivedValue, _a, cb) {\n        var path = _a.path, rootData = _a.rootData, args = _a.args, state = _a.state, options = _a.options;\n        var _b = args[0], expectedValues = _b === void 0 ? {} : _b;\n        var constraints = [\n            {\n                keyword: 'list',\n                args: [\n                    [\n                        {\n                            keyword: 'enum',\n                            args: [expectedValues]\n                        }\n                    ]\n                ]\n            }\n        ];\n        this.validate(receivedValue, {\n            schema: constraints,\n            path: path,\n            rootData: rootData,\n            state: state,\n            options: options\n        }, function (err) {\n            if (err) {\n                var keys = Object.keys(expectedValues);\n                var values = keys.map(function (key) { return expectedValues[key]; });\n                return cb({\n                    keys: keys,\n                    values: values\n                });\n            }\n            cb();\n        });\n    }\n};\n//# sourceMappingURL=enumList.js.map","export default {\n    isHighOrder: true,\n    name: 'value',\n    validator: function (value, _a, cb) {\n        var args = _a.args;\n        var expectedValue = args[0];\n        if (value !== expectedValue) {\n            return cb({\n                value: expectedValue\n            });\n        }\n        return cb();\n    }\n};\n//# sourceMappingURL=value.js.map","import validators from './format_validator';\nexport default {\n    isHighOrder: true,\n    name: 'format',\n    validator: function (value, _a, cb) {\n        var args = _a.args;\n        var format = args[0];\n        var validator = validators[format];\n        if (validator) {\n            if (!validator(value)) {\n                return cb({\n                    format: format\n                });\n            }\n            return cb();\n        }\n        return cb(new Error(\"no validator for format: \" + format));\n    }\n};\n//# sourceMappingURL=format.js.map","export default {\n    isHighOrder: true,\n    name: 'pattern',\n    add: function () {\n        var _this = this;\n        return function (pattern, flags) {\n            var constraint = { keyword: 'pattern' };\n            if (pattern instanceof RegExp) {\n                constraint.args = [pattern.source, pattern.flags];\n            }\n            else if (typeof pattern === 'string') {\n                constraint.args = [pattern, flags];\n            }\n            else {\n                throw new Error('pattern should be an RegExp instance or RegExp source string');\n            }\n            _this.add(constraint);\n            return _this;\n        };\n    },\n    validator: function (value, _a, cb) {\n        var args = _a.args;\n        var reg;\n        try {\n            reg = RegExp.apply(null, args);\n        }\n        catch (e) {\n            return cb(new Error('invalid pattern'));\n        }\n        return cb(!reg.test(value));\n    }\n};\n//# sourceMappingURL=pattern.js.map","import { charCount } from '../util';\nexport default {\n    isHighOrder: true,\n    name: 'length',\n    validator: function (value, _a, cb) {\n        var path = _a.path, state = _a.state, args = _a.args;\n        var type = state.types[path];\n        var valueLength;\n        if (!type) {\n            return cb(new Error('missing type declaration'));\n        }\n        switch (type) {\n            case 'string':\n                valueLength = charCount(value);\n                break;\n            case 'list':\n                valueLength = value.length;\n                break;\n            case 'binary':\n                if (typeof value === 'string') {\n                    valueLength = value.length;\n                    if (valueLength > 0) {\n                        var index = value.indexOf('=');\n                        var padding = index > -1 ? valueLength - index : 0;\n                        valueLength = (3 * valueLength) / 4 - padding;\n                    }\n                }\n                else {\n                    valueLength = value.byteLength;\n                }\n                break;\n            default:\n                return cb(new Error(\"can't use length constraint on type: \" + type));\n        }\n        var err;\n        var errType;\n        var length;\n        var minLength;\n        var maxLength;\n        var expected = args[0];\n        if (Array.isArray(expected)) {\n            minLength = expected[0], maxLength = expected[1];\n            if (minLength != null && maxLength != null) {\n                if (valueLength < minLength || valueLength > maxLength) {\n                    err = true;\n                    errType = 'range';\n                }\n            }\n            else if (minLength != null) {\n                if (valueLength < minLength) {\n                    err = true;\n                    errType = 'min';\n                }\n            }\n            else if (maxLength != null) {\n                if (valueLength > maxLength) {\n                    err = true;\n                    errType = 'max';\n                }\n            }\n            else {\n                return cb(new Error('missing minLength or maxLength'));\n            }\n        }\n        else {\n            length = expected;\n            if (valueLength !== expected) {\n                err = true;\n                errType = 'match';\n            }\n        }\n        if (err) {\n            return cb({\n                KEY: \"length_\" + type + \"_\" + errType,\n                length: length,\n                maxLength: maxLength,\n                minLength: minLength,\n                valueLength: valueLength\n            });\n        }\n        cb();\n    }\n};\n//# sourceMappingURL=length.js.map","export default {\n    name: 'unique',\n    validator: function (values, ctx, cb) {\n        var uniqueValues = [];\n        for (var i = 0, length = values.length; i < length; i++) {\n            var value = values[i];\n            if (uniqueValues.indexOf(value) === -1) {\n                uniqueValues.push(value);\n                continue;\n            }\n            return cb(true);\n        }\n        cb();\n    }\n};\n//# sourceMappingURL=unique.js.map","export default {\n    isHighOrder: true,\n    name: 'not',\n    validator: function (value, _a, cb) {\n        var path = _a.path, rootData = _a.rootData, state = _a.state, args = _a.args, options = _a.options;\n        var schema = args[0];\n        this.validate(value, {\n            schema: schema,\n            path: path,\n            rootData: rootData,\n            state: state,\n            options: options\n        }, function (err) {\n            if (err) {\n                cb();\n            }\n            else {\n                cb(true);\n            }\n        });\n    }\n};\n//# sourceMappingURL=not.js.map","import { isObject } from '../util';\nexport default {\n    name: 'notEmpty',\n    validator: function (value, ctx, cb) {\n        var type = typeof value;\n        switch (true) {\n            case type === 'number':\n                cb(value === 0);\n                break;\n            case type === 'string':\n                cb(value === '');\n                break;\n            case Array.isArray(value):\n                cb(value.length === 0);\n                break;\n            case isObject(value):\n                cb(Object.keys(value).length === 0);\n                break;\n            default:\n                cb(value == null);\n        }\n    }\n};\n//# sourceMappingURL=notEmpty.js.map","export default {\n    isHighOrder: true,\n    name: 'equal',\n    validator: function (value, _a, cb) {\n        var path = _a.path, rootData = _a.rootData, state = _a.state, args = _a.args;\n        var targetId = args[0];\n        var targetValue = this.getValue(targetId, rootData, path, state.values);\n        if (value !== targetValue) {\n            return cb({\n                id: targetId\n            });\n        }\n        return cb();\n    }\n};\n//# sourceMappingURL=equal.js.map","export default {\n    name: 'allowAdditional',\n    validator: function (value, _a, cb) {\n        var path = _a.path, state = _a.state;\n        state.mapAllowAdditional[path] = true;\n        cb();\n    }\n};\n//# sourceMappingURL=allowAdditional.js.map","export default {\n    isHighOrder: true,\n    name: 'other',\n    validator: function (value, ctx, cb) {\n        cb();\n    }\n};\n//# sourceMappingURL=other.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { getConstraints, isObject } from './util';\nimport ValidationError from './ValidationError';\nfunction getCacheResult(path, schema, _a) {\n    var cache = _a.cache;\n    if (typeof cache[path] !== 'undefined') {\n        var target = cache[path].find(function (item) { return item[0] === schema; });\n        if (target) {\n            return target[1];\n        }\n    }\n}\nfunction appendCacheResult(result, path, schema, _a) {\n    var cache = _a.cache;\n    var cacheItem = [schema, result];\n    if (cache[path]) {\n        cache[path].push(cacheItem);\n    }\n    else {\n        cache[path] = [cacheItem];\n    }\n}\nfunction removeAdditional(path, _a) {\n    var values = _a.values, mapAllowAdditional = _a.mapAllowAdditional, mapDefinitions = _a.mapDefinitions;\n    var definition = mapDefinitions[path];\n    if (definition && !mapAllowAdditional[path]) {\n        var objValue = values[path];\n        var keys = definition.reduce(function (result, current) {\n            result.push.apply(result, Object.keys(current));\n            return result;\n        }, []);\n        for (var prop in objValue) {\n            if (keys.indexOf(prop) === -1) {\n                delete objValue[prop];\n            }\n        }\n    }\n}\nvar GateSchema = (function () {\n    function GateSchema(options) {\n        if (options === void 0) { options = {}; }\n        var constraints = options.constraints;\n        if (typeof constraints === 'undefined') {\n            constraints = this.initConstraints.slice();\n        }\n        this.constraints = constraints;\n        Object.defineProperty(this, 'lastConstraintIndex', {\n            value: 0,\n            writable: true\n        });\n    }\n    GateSchema.addAlias = function (_a) {\n        var name = _a.name, add = _a.add;\n        var ctor = this;\n        var proto = ctor.prototype;\n        if (proto[name]) {\n            throw new Error(\"keyword \" + name + \" conflict\");\n        }\n        Object.defineProperty(ctor, name, {\n            get: function () {\n                return new ctor()[name];\n            }\n        });\n        Object.defineProperty(proto, name, {\n            get: function () {\n                return add.call(this);\n            }\n        });\n    };\n    GateSchema.addKeyword = function (keyword, msgs) {\n        var name = keyword.name, validator = keyword.validator, getChildSchema = keyword.getChildSchema, getMatchSchema = keyword.getMatchSchema, isAsync = keyword.isAsync;\n        var proto = this.prototype;\n        var ctor = this;\n        Object.defineProperty(ctor, name, {\n            get: function () {\n                return new this()[name];\n            }\n        });\n        Object.defineProperty(proto, name, {\n            get: ctor.createAddFunction(keyword)\n        });\n        if (msgs) {\n            this.addMsgs(msgs);\n        }\n        if (isAsync) {\n            ctor._asyncKeywords[name] = true;\n        }\n        this._validators[name] = validator;\n        if (getChildSchema) {\n            this._getChildSchema[name] = getChildSchema;\n        }\n        if (getMatchSchema) {\n            this._getMatchSchema[name] = getMatchSchema;\n        }\n    };\n    GateSchema.createAddFunction = function (keyword) {\n        var name = keyword.name, isHighOrder = keyword.isHighOrder, add = keyword.add;\n        if (typeof add === 'function') {\n            return add;\n        }\n        else if (isHighOrder) {\n            return function () {\n                var _this = this;\n                return function () {\n                    var args = [];\n                    for (var _i = 0; _i < arguments.length; _i++) {\n                        args[_i] = arguments[_i];\n                    }\n                    if (!args) {\n                        throw new Error('arguments are required');\n                    }\n                    return _this.add({\n                        args: args,\n                        keyword: name\n                    });\n                };\n            };\n        }\n        return function () {\n            return this.add(name);\n        };\n    };\n    GateSchema.addMsgs = function (msgs) {\n        Object.assign(this.msgs, msgs);\n    };\n    GateSchema.resolvePath = function (targetPath, currentPath) {\n        if (targetPath.indexOf('./') === 0) {\n            targetPath =\n                currentPath.slice(0, currentPath.lastIndexOf('/')) +\n                    targetPath.slice(1);\n        }\n        else if (targetPath.indexOf('../') === 0) {\n            var keySplited = targetPath.split('../');\n            var keyLength = keySplited.length;\n            var idSplited = currentPath.split('/');\n            var idLength = idSplited.length;\n            if (idLength >= keyLength) {\n                targetPath = currentPath\n                    .split('/')\n                    .slice(0, -keyLength)\n                    .concat(keySplited[keyLength - 1])\n                    .join('/');\n            }\n            else {\n                throw new Error(\"Can't resolve \" + currentPath);\n            }\n        }\n        return targetPath;\n    };\n    GateSchema.getValue = function (path, rootData, currentPath, values) {\n        if (values === void 0) { values = {}; }\n        if (path === '/') {\n            return rootData;\n        }\n        if (currentPath != null) {\n            path = this.resolvePath(path, currentPath);\n        }\n        if (!Object.getOwnPropertyDescriptor(values, path)) {\n            var prop = void 0;\n            var parentPath = void 0;\n            var parentValue = void 0;\n            var index = path.lastIndexOf('/');\n            if (index > 0) {\n                prop = path.slice(index + 1);\n                parentPath = path.slice(0, index);\n                parentValue = GateSchema.getValue(parentPath, rootData, null, values);\n            }\n            else {\n                prop = path.slice(1);\n                parentValue = rootData;\n            }\n            if (isObject(parentValue)) {\n                values[path] = parentValue[prop];\n            }\n        }\n        return values[path];\n    };\n    GateSchema.getSchema = function (path, _a, cb) {\n        var _this = this;\n        var options = _a.options, rootSchema = _a.rootSchema, rootData = _a.rootData;\n        if (path === '/') {\n            return cb(rootSchema);\n        }\n        var keys = path.split('/').slice(1);\n        var getChildSchema = function (_a, callback) {\n            var childKey = _a.childKey, parentPath = _a.parentPath, schema = _a.schema;\n            var j = 0;\n            var constraint;\n            var keyword;\n            var args;\n            var getMatchSchema;\n            var getChildSchemaOfKeyword;\n            var constraints = getConstraints(schema);\n            var constraintsLength = constraints.length;\n            var tryNext = function (result) {\n                if (!result && j < constraintsLength) {\n                    constraint = constraints[j++];\n                    if (typeof constraint === 'object') {\n                        keyword = constraint.keyword;\n                        args = constraint.args;\n                    }\n                    else {\n                        keyword = constraint;\n                        args = [];\n                    }\n                    getMatchSchema = _this._getMatchSchema[keyword];\n                    getChildSchemaOfKeyword = _this._getChildSchema[keyword];\n                    if (getMatchSchema) {\n                        getMatchSchema.call(_this, { path: parentPath, args: args, rootData: rootData, state: state, options: options }, function (matchSchema) {\n                            if (matchSchema) {\n                                getChildSchema({\n                                    childKey: childKey,\n                                    parentPath: parentPath,\n                                    schema: matchSchema\n                                }, tryNext);\n                            }\n                            else {\n                                tryNext();\n                            }\n                        });\n                    }\n                    else if (getChildSchemaOfKeyword) {\n                        getChildSchemaOfKeyword.call(_this, { args: args, childKey: childKey }, tryNext);\n                    }\n                    else {\n                        tryNext();\n                    }\n                }\n                else {\n                    callback(result);\n                }\n            };\n            tryNext();\n        };\n        var i = 0;\n        var currentPath = '';\n        var child;\n        var length = keys.length;\n        var state = {\n            mapAllowAdditional: {},\n            mapDefinitions: {},\n            types: {},\n            values: {},\n            cache: {}\n        };\n        var next = function (currentSchema) {\n            if (currentSchema) {\n                if (i < length) {\n                    currentPath += child ? \"/\" + child : \"/\";\n                    child = keys[i++];\n                    getChildSchema({\n                        childKey: child,\n                        parentPath: currentPath,\n                        schema: currentSchema\n                    }, next);\n                }\n                else {\n                    cb(Array.isArray(currentSchema)\n                        ? new _this({\n                            constraints: currentSchema\n                        })\n                        : currentSchema);\n                }\n            }\n            else {\n                cb();\n            }\n        };\n        next(rootSchema);\n    };\n    GateSchema.extend = function (options) {\n        if (options === void 0) { options = {}; }\n        var defaultOptions = options.defaultOptions, initConstraints = options.initConstraints, keywords = options.keywords, aliases = options.aliases, msgs = options.msgs;\n        var parent = this;\n        var GateSchemaExtended = (function (_super) {\n            __extends(GateSchemaExtended, _super);\n            function GateSchemaExtended() {\n                return _super !== null && _super.apply(this, arguments) || this;\n            }\n            return GateSchemaExtended;\n        }(parent));\n        Object.assign(GateSchemaExtended, parent);\n        GateSchemaExtended.msgs = Object.create(parent.msgs);\n        GateSchemaExtended._validators = Object.create(parent._validators);\n        GateSchemaExtended._getChildSchema = Object.create(parent._getChildSchema);\n        GateSchemaExtended._getMatchSchema = Object.create(parent._getMatchSchema);\n        var proto = GateSchemaExtended.prototype;\n        if (defaultOptions) {\n            proto.defaultOptions = defaultOptions;\n        }\n        if (initConstraints) {\n            proto.initConstraints = initConstraints;\n        }\n        if (Array.isArray(keywords)) {\n            keywords.forEach(function (item) {\n                GateSchemaExtended.addKeyword(item);\n            });\n        }\n        if (Array.isArray(aliases)) {\n            aliases.forEach(function (item) {\n                GateSchemaExtended.addAlias(item);\n            });\n        }\n        if (msgs) {\n            GateSchemaExtended.addMsgs(msgs);\n        }\n        return GateSchemaExtended;\n    };\n    GateSchema.getMsg = function (key) {\n        return this.msgs[key];\n    };\n    GateSchema.createError = function (name, value, msgParams, ctx) {\n        var constraint = ctx.constraint;\n        var errorParams = {\n            keyword: name,\n            msgParams: msgParams,\n            path: ctx.path,\n            value: value\n        };\n        var msg = constraint.msg || this.getMsg(msgParams.KEY);\n        errorParams.msg =\n            this.formatMsg(msg, msgParams, constraint) || 'invalid value';\n        return new this.Error(errorParams);\n    };\n    GateSchema.formatMsg = function (msg, msgParams, constraint) {\n        if (msg && msg.indexOf('${') > -1) {\n            msg = msg.replace(/\\$\\{(.+?)\\}/g, function (match, key) {\n                return msgParams[key];\n            });\n        }\n        return msg;\n    };\n    GateSchema.validate = function (value, _a, cb) {\n        var _this = this;\n        var path = _a.path, rootData = _a.rootData, schema = _a.schema, state = _a.state, _b = _a.options, options = _b === void 0 ? {} : _b;\n        var resultCache = getCacheResult(path, schema, state);\n        if (resultCache) {\n            return cb(resultCache);\n        }\n        var _c = this, _validators = _c._validators, BREAK = _c.BREAK, VError = _c.Error, _asyncKeywords = _c._asyncKeywords;\n        var REMOVE_ADDITIONAL = options.removeAdditional, SKIPS = options.skips, SKIP_ASYNC = options.skipAsync;\n        var constraints = getConstraints(schema);\n        var constraintsLength = constraints.length;\n        var i = 0;\n        var item;\n        var args;\n        var validator;\n        var keyword;\n        var result;\n        var next = function (err) {\n            if (err) {\n                switch (true) {\n                    case err === BREAK:\n                        result = null;\n                        break;\n                    case err instanceof VError:\n                        result = err;\n                        break;\n                    case err instanceof Error:\n                        throw err;\n                        break;\n                    default:\n                        var msgParams = err === true ? {} : err;\n                        if (!msgParams.KEY) {\n                            msgParams.KEY = keyword;\n                        }\n                        result = _this.createError(keyword, value, msgParams, {\n                            constraint: item,\n                            path: path,\n                            rootData: rootData,\n                            state: state\n                        });\n                }\n                appendCacheResult(result, path, schema, state);\n                cb(result);\n            }\n            else if (i < constraintsLength) {\n                item = constraints[i++];\n                keyword = typeof item === 'string' ? item : item.keyword;\n                if (SKIP_ASYNC && _asyncKeywords[keyword]) {\n                    next();\n                }\n                args = item.args;\n                validator = _validators[keyword];\n                if (validator) {\n                    validator.call(_this, value, {\n                        args: args,\n                        path: path,\n                        rootData: rootData,\n                        state: state,\n                        options: options\n                    }, next);\n                }\n                else if (SKIPS && SKIPS.indexOf(keyword) > -1) {\n                    next();\n                }\n                else {\n                    cb(new Error(\"no validator for keyword: \" + keyword + \", constraint: \" + JSON.stringify(item)));\n                }\n            }\n            else {\n                appendCacheResult(null, path, schema, state);\n                if (REMOVE_ADDITIONAL) {\n                    removeAdditional(path, state);\n                }\n                cb(null);\n            }\n        };\n        next();\n    };\n    GateSchema.prototype.add = function (constraint) {\n        this.lastConstraintIndex = this.constraints.length;\n        this.constraints.push(constraint);\n        return this;\n    };\n    GateSchema.prototype.validate = function () {\n        var _this = this;\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var value = arguments[0];\n        var options = arguments[1];\n        var cb = arguments[2];\n        if (typeof options === 'function') {\n            cb = options;\n            options = undefined;\n        }\n        if (options == null) {\n            options = this.defaultOptions;\n        }\n        var ctx = {\n            schema: this.constraints,\n            path: '/',\n            rootData: value,\n            state: {\n                mapAllowAdditional: {},\n                mapDefinitions: {},\n                types: {},\n                values: {},\n                cache: {}\n            },\n            options: options\n        };\n        if (typeof cb === 'function') {\n            this.constructor.validate(value, ctx, function (err) {\n                cb(err);\n            });\n        }\n        else {\n            return new Promise(function (resolve, reject) {\n                _this.constructor.validate(value, ctx, function (err) {\n                    return err ? reject(err) : resolve(err);\n                });\n            });\n        }\n    };\n    GateSchema.prototype.toJSON = function () {\n        return JSON.parse(JSON.stringify(this.constraints));\n    };\n    GateSchema.BREAK = Symbol('break');\n    GateSchema.msgs = {};\n    GateSchema._asyncKeywords = {};\n    GateSchema._validators = {};\n    GateSchema._getMatchSchema = {};\n    GateSchema._getChildSchema = {};\n    GateSchema.Error = ValidationError;\n    return GateSchema;\n}());\nGateSchema.prototype.defaultOptions = {};\nGateSchema.prototype.initConstraints = [];\nexport default GateSchema;\n//# sourceMappingURL=schemaBase.js.map","import $clone from './clone';\nimport $get from './get';\nimport $keys from './keys';\nimport $msg from './msg';\nexport default {\n    $clone: $clone,\n    $keys: $keys,\n    $msg: $msg,\n    $get: $get\n};\n//# sourceMappingURL=index.js.map","export default function $clone(options) {\n    if (options === void 0) { options = {}; }\n    var pick = options.pick, omit = options.omit;\n    var constraintsOrigin = JSON.parse(JSON.stringify(this));\n    var handleMap = pick\n        ? createObjectHandler(function (key) { return pick.indexOf(key) === -1; })\n        : omit\n            ? createObjectHandler(function (key) { return omit.indexOf(key) > -1; })\n            : function () { return undefined; };\n    var handleConstraints = function (constraints) {\n        constraints.forEach(function (item) {\n            if (item.keyword === 'map') {\n                handleMap(item.args[0]);\n            }\n            if (item.keyword === 'switch') {\n                var cases = item.args[1];\n                cases.forEach(function (caseItem) {\n                    handleConstraints(caseItem.schema);\n                });\n            }\n        });\n    };\n    function createObjectHandler(check) {\n        return function (obj) {\n            for (var key in obj) {\n                if (check(key)) {\n                    delete obj[key];\n                }\n            }\n        };\n    }\n    handleConstraints(constraintsOrigin);\n    return new this.constructor({ constraints: constraintsOrigin });\n}\n//# sourceMappingURL=clone.js.map","export default function $keys() {\n    var keys = [];\n    this.constraints.forEach(function (item) {\n        if (item.keyword === 'map') {\n            keys = keys.concat(Object.keys(item.args[0]));\n        }\n        else if (item.keyword === 'switch') {\n            item.args[1].forEach(function (caseItem) {\n                keys = keys.concat(caseItem.schema.$keys());\n            });\n        }\n    });\n    return keys;\n}\n//# sourceMappingURL=keys.js.map","export default function $msg(msg) {\n    var lastConstraintIndex = this.lastConstraintIndex;\n    var constraints = this.constraints;\n    var lastConstraint = constraints[lastConstraintIndex];\n    if (lastConstraint) {\n        if (typeof lastConstraint === 'string') {\n            lastConstraint = {\n                keyword: lastConstraint\n            };\n            constraints.splice(lastConstraintIndex, 1, lastConstraint);\n        }\n        lastConstraint.msg = msg;\n    }\n    return this;\n}\n//# sourceMappingURL=msg.js.map","export default function $get(path, rootData, validationOptions, cb) {\n    if (typeof rootData === 'function') {\n        cb = rootData;\n        rootData = undefined;\n    }\n    else if (typeof validationOptions === 'function') {\n        cb = validationOptions;\n        validationOptions = {};\n    }\n    this.constructor.getSchema(path, {\n        rootData: rootData,\n        options: validationOptions,\n        rootSchema: this\n    }, cb);\n    return this;\n}\n//# sourceMappingURL=get.js.map","var ValidationError = (function () {\n    function ValidationError(options) {\n        Object.assign(this, options);\n    }\n    return ValidationError;\n}());\nexport default ValidationError;\n//# sourceMappingURL=ValidationError.js.map","import aliases from './alias/index';\nimport keywords from './keywords/index';\nimport msgs from './msgs';\nimport protoProps from './protoProps/index';\nimport GateSchemaBase from './schemaBase';\nvar _ = GateSchemaBase.extend({\n    aliases: aliases,\n    keywords: keywords,\n    msgs: msgs\n});\nvar r = _.extend({\n    initConstraints: ['required']\n});\nvar o = _.extend({\n    initConstraints: ['optional']\n});\nObject.assign(GateSchemaBase.prototype, protoProps);\nexport { _, r, o };\nexport default _;\n//# sourceMappingURL=index.js.map","export default {\n    binary: 'should be binary',\n    boolean: 'should be true or false',\n    number: 'should be a number',\n    string: 'should be a string',\n    list: 'should be an list',\n    map: 'should be a map',\n    enum: 'should be one of ${values}',\n    enumList: 'should be a list only containing these values: ${values}',\n    not: 'invalid value',\n    equal: 'should equal to the value of ${id}',\n    format: 'invalid ${format} format',\n    length_string_match: 'should contain ${length} characters',\n    length_string_min: 'should contain at least ${maxLength} characters',\n    length_string_max: 'should contain at most ${maxLength} characters',\n    length_string_range: 'should contain ${minLength} to ${maxLength} characters',\n    length_list_match: 'should contain ${length} items',\n    length_list_min: 'should contain at least ${minLength} items',\n    length_list_max: 'should contain at most ${maxLength} items',\n    length_list_range: 'should contain ${minLength} to ${maxLength} items',\n    length_binary_match: 'should contain ${length} bytes',\n    length_binary_min: 'should contain at least ${minLength} bytes',\n    length_binary_max: 'should contain at most ${maxLength} bytes',\n    length_binary_range: 'should contain ${minLength} to ${maxLength} bytes',\n    notEmpty: 'should not be empty',\n    oneOf: 'invalid value',\n    pattern: 'invalid format',\n    required: 'should not be null or undefined',\n    requiredOne: 'at least one field of ${keys} could not be undefined or null',\n    switch: 'no matching case',\n    unique: 'each element should be unique',\n    value: 'should be ${value}'\n};\n//# sourceMappingURL=msgs.js.map"],"names":["this","required","optional","boolean","number","string","binary","_this","path","whenNotNull","whenNull","_","constructor","switch","any","isObject","x","getConstraints","schema","Array","isArray","constraints","ArrayFrom","charCount","from","str","replace","length","NUMERIC","getMatchSchema","_a","cb","schemaItem","args","rootData","_b","state","options","schemas","value","getValue","values","next","i","validate","err","targetPath","branches","targetValue","branch","caseItem","case","schema_1","DATE","DAYS","TIME","DATE_TIME_SEPARATOR","HOSTNAME","NOT_URI_FRAGMENT","URI","URL","EMAIL","IPV4","IPV6","date","matches","match","year","month","day","validators","dateTime","split","full","hour","minute","second","timeZone","time","test","first","name","unshift","splice","lastConstraintIndex","ctx","BREAK","types","ArrayBuffer","obj","keys","Object","stateValues","stateMapDefinitions","mapDefinitions","push","key","childKey","call","receivedValue","expectedValues","map","JSON","stringify","expectedValue","format","validator","Error","pattern","flags","constraint","keyword","RegExp","source","add","reg","apply","e","valueLength","errType","minLength","maxLength","type","index","indexOf","byteLength","expected","uniqueValues","targetId","mapAllowAdditional","extendStatics","pick","omit","constraintsOrigin","parse","handleMap","createObjectHandler","handleConstraints","forEach","item","check","concat","$keys","msg","lastConstraint","validationOptions","undefined","getSchema","ValidationError","assign","__extends","setPrototypeOf","__proto__","d","b","p","hasOwnProperty","__","prototype","create","appendCacheResult","result","cache","cacheItem","GateSchema","initConstraints","slice","defineProperty","addAlias","ctor","proto","addKeyword","msgs","getChildSchema","isAsync","createAddFunction","addMsgs","_asyncKeywords","_validators","_getChildSchema","_getMatchSchema","isHighOrder","_i","arguments","resolvePath","currentPath","lastIndexOf","keySplited","keyLength","join","getOwnPropertyDescriptor","prop","parentPath","parentValue","rootSchema","child","callback","getChildSchemaOfKeyword","j","constraintsLength","tryNext","matchSchema","currentSchema","extend","defaultOptions","keywords","aliases","parent","GateSchemaExtended","_super","getMsg","createError","msgParams","errorParams","KEY","formatMsg","resultCache","target","find","getCacheResult","VError","REMOVE_ADDITIONAL","removeAdditional","SKIPS","skips","SKIP_ASYNC","skipAsync","definition","objValue","reduce","current","Promise","resolve","reject","toJSON","Symbol","GateSchemaBase","r","o","protoProps"],"mappings":"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"}